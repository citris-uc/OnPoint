<link type="text/css" rel="stylesheet" href="css/timelineStyle.css"/>

<ion-view title="{{ today | date:'MMMM dd, yyyy'}}" class = "timeline">
  <ion-nav-buttons side="left">
    <button class="button button-icon icon ion-ios-gear-outline button-positive button-clear"
    ui-sref="tabsController.settings"></button>
  </ion-nav-buttons>

  <!-- Text input for Symptoms Feeling tracker -->
  <!-- TODO: Save button on right? -->
  <!-- TODO: DO we really need this? @dman7 -->
  <div class="bar bar-subheader item-input-inset">
      <label class="item-input-wrapper">
        <input type="text" placeholder="How are you feeling?">
      </label>
      <button class="button button-small button-clear buttonText" disabled>
        Save
      </button>
  </div>

  <!-- Stuff after here will scroll -->
  <ion-content overflow-scroll="true" padding="true" class="has-header has-subheader">
    <ion-refresher pulling-text="Pull to refresh" on-refresh="generateCardsForToday()">
    </ion-refresher>


    <!-- Create Current Cards ng-show="shouldDisplayCard(c.shown_at)" -->
    <div ng-repeat="dayCards in cards">
      <!-- Divider for Current Cards-->
      <div class="divline">-</div>
      <center class="divtext">{{$index == 0 ? 'Current Cards' : 'Upcoming Cards'}}</center>

      <div class="card" ng-repeat="c in dayCards | orderBy: 'shown_at' | filter: {archived_at: '!'}" on-swipe-right="swipeCard(c)" on-swipe-left="swipeCard(c)">
        <!-- Card Title -->
        <div ng-class="['item', getCardStatus(c)]">
          <a>{{c.type == CARD.TYPE.ACTION ? 'Take ': c.type == CARD.TYPE.URGENT ? 'TODO: ': ''}}{{formatTitle(c.object_type)}}{{c.type == CARD.TYPE.REMINDER ? ' Reminder':''}}</a>
          <a style="float:right">{{getTime(c.shown_at) | date: 'M/d h:mm a'}}</a>
        </div>

        <!-- Card Body -->
        <div class="item item-text-wrap" >
          <div ng-repeat="line in getBody(c, c.object_type) track by $index">{{line}}</div>
        </div>

        <!-- Card Buttons -->
        <div class="button-bar">
          <a class="button button-small button-clear icon ion-ios-chatboxes-outline buttonText" ui-sref="tabsController.comments({card_id:c.$id, comment_id: c.comment_id})"> Comments  ({{c.num_comments}})</a>
          <a class="button button-small button-clear buttonText" ng-click="openPage(c, c.object_type, $index)" style="border-left: 1px solid #C0C0C0;">Go to {{formatTitle(c.object_type)}}</a>
        </div>
      </div>
    </div>

  </ion-content>
</ion-view>
