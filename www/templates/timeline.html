<link type="text/css" rel="stylesheet" href="css/timelineStyle.css"/>

<ion-view title="{{ today | date:'MMMM dd, yyyy'}}" class = "timeline">
  <ion-nav-buttons side="primary">
    <button class="button button-icon icon ion-ios-gear-outline button-positive button-clear" ui-sref="tabsController.settings"></button>
  </ion-nav-buttons>

  <div class="bar bar-subheader item-input-inset">
    <label class="item-input-wrapper">
      <input type="text" placeholder="How are you feeling?">
    </label>
    <button class="button button-small button-clear buttonText" disabled>Save</button>
  </div>
  <div class="bar bar-subheader item-input-inset" style="justify-content: center;">
    <div class="col-25 button-bar bar-light">
      <a class="button button-small button-positive">Today</a>
      <a class="button button-small">History</a>
    </div>
  </div>



  <!-- Stuff after here will scroll -->
  <ion-content overflow-scroll="true" padding="true" class="has-header has-subheader">
    <ion-refresher pulling-text="Pull to refresh" on-refresh="generateCardsForToday()" pulling-icon="ion-ios-refresh-empty"></ion-refresher>

    <div class="card-section current">
      <hr></hr>
      <h4 class="text-center">Current Cards</h4>
    </div>

    <div class="row" style="justify-content: center;">
      <div class="col col-75">

        <div class="list card">

          <div class="item item-icon-left">
            <i class="icon ion-arrow-graph-up-right"></i>
            <h2>Measurements</h2>
            <p>09:00AM, April 21</p>

            <span class="badge badge-energized">In progress</span>
          </div>

          <div class="item item-body">
            Your weigh in is at 09:00 AM
          </div>

          <div class="row">
            <div class="col">
              <a class="item item-icon-left" href="#">
                <i class="icon ion-ios-eye"></i>
                View card
              </a>
            </div>
            <div class="col">
              <a class="item item-icon-left" href="#">
                <i class="icon ion-ios-chatbubble-outline"></i>
                5 Comments
              </a>
            </div>
          </div>

        </div>
      </div>
    </div>

    <!-- Create Current Cards -->
    <div class="card" ng-repeat="c in cards | orderBy: 'shown_at' | filter: {archived_at: '!'}" on-swipe-right="swipeCard(c)" on-swipe-left="swipeCard(c)">
      <!-- Card Title -->
      <div ng-class="['item', getCardStatus(c)]">
        <a>{{c.type == CARD.TYPE.ACTION ? 'Take ': c.type == CARD.TYPE.URGENT ? 'TODO: ': ''}}{{formatTitle(c.object_type)}}{{c.type == CARD.TYPE.REMINDER ? ' Reminder':''}}</a>
        <a style="float:right">{{getTime(c.shown_at) | date: 'M/d h:mm a'}}</a>
      </div>

      <!-- Card Body -->
      <div class="item item-text-wrap" >
        <div ng-repeat="line in getBody(c, c.object_type) track by $index">{{line}}</div>
      </div>

      <!-- Card Buttons -->
      <div class="button-bar">
        <a class="button button-small button-clear icon ion-ios-chatboxes-outline buttonText" ui-sref="tabsController.comments({card_id:c.$id, comment_id: c.comment_id})"> Comments  ({{c.num_comments}})</a>
        <a class="button button-small button-clear buttonText" ng-click="openPage(c, c.object_type, $index)" style="border-left: 1px solid #C0C0C0;">Go to {{formatTitle(c.object_type)}}</a>
      </div>
    </div>

    <!-- Divider for Upcoming Cards-->
    <div class="card-section upcoming">
      <hr></hr>
      <h4 class="text-center">Upcoming Cards</h4>
    </div>




  </ion-content>
</ion-view>
