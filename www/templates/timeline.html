<link type="text/css" rel="stylesheet" href="css/timelineStyle.css"/>

<ion-view title="Timeline" class = "timeline">
  <!-- <ion-nav-buttons side="primary">
    <button class="button button-icon icon ion-ios-gear-outline button-positive button-clear" ui-sref="tabsController.settings"></button>
  </ion-nav-buttons> -->

  <!-- <div class="bar bar-subheader item-input-inset">
    <label class="item-input-wrapper">
      <input type="text" placeholder="How are you feeling?" ng-model="userInput.feeling" >
    </label>
    <button class="button button-small button-positive button-clear buttonText" ng-click="saveFeeling()">Save</button>
  </div> -->
  <!-- <div class="bar bar-subheader item-input-inset segmented-control">
    <div class="button-bar bar-light responsive-col">
      <a class="button button-small" ng-click="transitionToPageIndex(0)" ng-class="{'button-positive': timeline.pageIndex === 0}">Today</a>
      <a class="button button-small" ng-click="transitionToPageIndex(1)" ng-class="{'button-positive': timeline.pageIndex === 1}">History</a>
    </div>
  </div> -->

  <div class="tabs-striped tabs-top">
    <div class="tabs">
      <!-- <a class="tab-item" ng-click="transitionToPageIndex(0)" ng-class="{'active': timeline.pageIndex === 0}">
        History
      </a> -->

      <a class="tab-item" ng-click="transitionToPageIndex(1)" ng-class="{'active': timeline.pageIndex === 1}">
        Today
      </a>

      <!-- <a class="tab-item" ng-click="transitionToPageIndex(2)" ng-class="{'active': timeline.pageIndex === 2}">
        Tomorrow
      </a> -->


    </div>
  </div>


  <!-- Stuff after here will scroll -->
  <ion-content overflow-scroll="true" padding="true" class="has-header has-subheader">
    <ion-refresher pulling-text="Pull to refresh" on-refresh="loadCards()" pulling-icon="ion-ios-refresh-empty"></ion-refresher>

    <ion-slide-box active-slide="1" on-slide-changed="changeTimeline($index)" does-continue="false" show-pager="false">
      <ion-slide>
        <div class="list card" ng-show="history.cards.length === 0">
          <div class="item item-body">
            Looks like you don't have any history yet.
          </div>
        </div>


        <!-- <div ng-repeat="date in history.cards | orderBy:'-'"> -->
        <div ng-repeat="card in today.cards">
          <div class="card-section history">
            <hr class="responsive-col"></hr>
            <h4 class="text-center">{{card.formatted_time}}</h4>
          </div>

          <div class="row" style="justify-content: center;">
            <div class="col responsive-col">
              <div class="list card">
                <div class="item">
                  <div class="row">
                    <div class="col-10">
                      <h2>{{card.short_timestamp}}</h2>
                    </div>

                    <div class="col-90">{{card}}</div>
                  </div>
                </div>
                <!-- <div class="item item-avatar">
                  <img src="img/pill.png">
                  <h2>{{card.title}}</h2>
                  <p>{{card.formatted_time}}</p>
                  <p>{{card.time_ago_in_words}}</p>
                </div>

                <div class="item item-body">
                  {{card.description}}
                </div>
                <div class="col responsive-col-md-25">
                  <a class="item item-icon-left" ui-sref="tabsController.comments({card_id:c.$id, comment_id: c.comment_id})">
                    <i class="icon ion-ios-chatbubble-outline"></i>
                    Comment {{c.num_comments > 0 ? '('+c.num_comments+')' : ''}}
                  </a>
                </div> -->
              </div>

            </div>
          </div>
        </div>
      </ion-slide>

      <ion-slide>
        <div class="list card" ng-show="today.cards.length === 0">
          <div class="item item-body">
            Looks like you don't have any cards due today.
          </div>
        </div>


        <div ng-repeat="card in today.cards">
          <!-- ng-repeat="c in date | toArray | orderBy: 'shown_at' | filter: {archived_at: '!'}"  -->
          <div class="row" style="justify-content: center;" on-swipe-right="swipeCard(card)" on-swipe-left="swipeCard(card)">
            <div class="col responsive-col">
              <div class="list card" ng-click="openPage(card, card.object_type)">
                <div class="item item-text-wrap">
                  <div class="row">
                    <div class="col-50">
                      <h3 style="font-size:20px; font-weight:bold;">{{card.schedule.time}}</h3>
                      <p>Today</p>
                    </div>

                    <div class="col-50">
                      <h3 style="font-size:20px; font-weight:bold;">{{card.schedule.medications_length}}</h3>
                      <p>medications to take</p>
                    </div>
                  </div>
                </div>
              </div>


              <!-- <div class="list card">

                <div class="item item-avatar">
                  <img src="img/pill.png">
                  <h2>{{card.title}}</h2>
                  <p>{{card.formatted_time}}</p>
                  <p>{{card.time_ago_in_words}}</p>
                  <span class="badge {{card.status_class}}">{{card.status_text}}</span>
                </div>

                <div class="item item-body">
                  {{card.description}}
                </div>

                <div class="row">
                  <div class="col responsive-col-md-25" ng-show="card.completed_at == null">
                    <a class="item item-icon-left" ng-click="openPage(card, card.object_type)">
                      <i class="icon ion-ios-eye"></i>
                      View
                    </a>
                  </div>

                  <div class="col responsive-col-md-25" ng-show="card.completed_at != null">
                    <a class="item item-icon-left" ng-click="archive(card)">
                      <i class="icon ion-archive"></i>
                      Archive
                    </a>
                  </div>

                  <div class="col responsive-col-md-25">
                    <a class="item item-icon-left" ui-sref="tabsController.comments({card_id:card.id, comment_id: card.comment_id})">
                      <i class="icon ion-ios-chatbubble-outline"></i>
                      Comment {{c.num_comments > 0 ? '('+card.num_comments+')' : ''}}
                    </a>
                  </div>
                </div>


              </div> -->

            </div>
          </div>

        </div>
      </ion-slide>



      <ion-slide>
        <div class="list card" ng-show="tomorrow.cards.length === 0">
          <div class="item item-body">
            Looks like you don't have any cards due tomorrow.
          </div>
        </div>


        <div ng-repeat="card in tomorrow.cards">
          <!-- <div class="row" style="justify-content: center;" ng-repeat="c in date | toArray | orderBy: 'shown_at' | filter: {archived_at: '!', object_type:'!appointments'}" on-swipe-right="swipeCard(c)" on-swipe-left="swipeCard(c)"> -->
          <div class="row" style="justify-content: center;">
            <div class="col responsive-col">

              <div class="list card">

                <div class="item item-icon-left">
                  <i class="icon ion-ios-medkit-outline"></i>
                  <h2>{{card.title}}</h2>
                  <p>{{card.formatted_time}}</p>
                </div>

                <div class="item item-body">
                  <!-- Your weigh in is at 09:00 AM -->
                  {{card.description}}
                </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </ion-slide>
    </ion-slide-box>



  </ion-content>
</ion-view>
